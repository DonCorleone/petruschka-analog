<div class="dialog-header">
  <h2 class="dialog-title">{{ data.gig.title }}</h2>
  <button 
    type="button" 
    class="btn-close btn btn-xs btn-ghost-secondary" 
    aria-label="Dialog schliessen"
    (click)="close()">
    <i class="fa-solid fa-times" aria-hidden="true"></i>
    <span class="sr-only">×</span>
  </button>
</div>

<div class="dialog-content">
  <div class="gig-info">
    <div class="row">
      <!-- Main Content Column -->
      <div class="col-md-7">
        <div class="info-section">
          @if (data.isHistoryEvent) {
            <h4>Historische Aufführung</h4>
            <p><strong>Titel:</strong> {{ data.gig.title }}</p>
            <p><strong>Uraufführung:</strong> {{ data.gig.date.day }} {{ data.gig.date.month }}</p>
          } @else {
            <h4>Veranstaltungsdetails</h4>
            @if (data.gig.eventDateString) {
              <p><strong>Datum & Zeit:</strong> {{ data.gig.eventDateString }}</p>
            } @else {
              <p><strong>Datum:</strong> {{ data.gig.date.day }} {{ data.gig.date.month }}</p>
              <p><strong>Tag:</strong> {{ data.gig.dayOfWeek }}</p>
              <p><strong>Zeit:</strong> {{ data.gig.time }}</p>
            }
            <p><strong>Veranstaltungsort:</strong> {{ data.gig.venue }}</p>
            @if (data.gig.duration) {
              <p><strong>Dauer:</strong> {{ data.gig.duration }}</p>
            }
            @if (data.gig.ageRecommendation) {
              <p><strong>Altersempfehlung:</strong> {{ data.gig.ageRecommendation }}</p>
            }
          }
        </div>

        <!-- Short Description -->
        @if (data.gig.shortDescription) {
          <div class="info-section">
            <h4>Kurzbeschreibung</h4>
            <p class="lead">{{ data.gig.shortDescription }}</p>
          </div>
        }
        
        <!-- Long Description with HTML content -->
        @if (data.gig.longDescription && data.gig.longDescription !== data.gig.shortDescription) {
          <div class="info-section">
            @if (data.isHistoryEvent) {
              <h4>Über dieses Stück</h4>
            } @else {
              <h4>Über diese Aufführung</h4>
            }
            <div [innerHTML]="data.gig.longDescription"></div>
          </div>
        } @else if (data.gig.description && !data.gig.shortDescription) {
          <div class="info-section">
            @if (data.isHistoryEvent) {
              <h4>Über dieses Stück</h4>
            } @else {
              <h4>Über diese Aufführung</h4>
            }
            <p>{{ data.gig.description }}</p>
          </div>
        }

        <!-- Artists/Cast Information -->
        @if (data.gig.artists) {
          <div class="info-section">
            <h4>Mitwirkende</h4>
            <p>{{ data.gig.artists }}</p>
          </div>
        }

        <!-- Important Notes -->
        @if (data.gig.importantNotes) {
          <div class="info-section alert alert-info">
            <h5><i class="fas fa-info-circle"></i> Wichtige Hinweise</h5>
            <p class="mb-0">{{ data.gig.importantNotes }}</p>
          </div>
        }

        <!-- Ticket Information
        @if (data.gig.ticketTypes && data.gig.ticketTypes.length > 0 && !data.isHistoryEvent) {
          <div class="info-section">
            <h4>Tickets & Preise</h4>
            <div class="ticket-types">
              @for (ticketType of data.gig.ticketTypes; track ticketType.name) {
                <div class="ticket-type mb-2">
                  <span class="ticket-name">{{ ticketType.name }}:</span>
                  <span class="ticket-price">{{ ticketType.currency }} {{ ticketType.price }}.00</span>
                  @if (ticketType.description) {
                    <small class="ticket-description d-block text-muted">{{ ticketType.description }}</small>
                  }
                </div>
              }
            </div>
          </div> 
        }-->
        
        @if (data.gig.ticketUrl && data.gig.ticketUrl !== '#' && !data.isHistoryEvent) {
          <div class="info-section">
            <a [href]="data.gig.ticketUrl" 
               target="_blank" 
               class="btn btn-primary btn-lg">
              <i class="fa-solid fa-ticket"></i> Tickets kaufen
            </a>
          </div>
        }
      </div>

      <!-- Image Column -->
      <div class="col-md-5">
        @if (data.gig.flyerImagePath) {
          <div class="gig-image mb-3">
            <img [src]="data.gig.flyerImagePath" 
                 [alt]="data.gig.title + ' Flyer'"
                 class="img-fluid rounded shadow-sm">
          </div>
        }
        
        @if (data.gig.bannerImagePath && !data.gig.flyerImagePath) {
          <div class="gig-banner mb-3">
            <img [src]="data.gig.bannerImagePath" 
                 [alt]="data.gig.title + ' Banner'"
                 class="img-fluid rounded shadow-sm">
          </div>
        }
      </div>
    </div>
  </div>
</div>